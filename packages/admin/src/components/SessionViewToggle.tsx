import { AgentTerminal } from './AgentTerminal.js';
import { StructuredView } from './StructuredView.js';

export type ViewMode = 'terminal' | 'structured' | 'split';

interface Props {
  sessionId: string;
  isActive?: boolean;
  onExit?: (exitCode: number) => void;
  permissionProfile?: string;
  mode: ViewMode;
}

export function SessionViewToggle({ sessionId, isActive, onExit, permissionProfile, mode }: Props) {
  return (
    <div class="session-view-toggle" style={{ display: 'flex', flexDirection: 'column', width: '100%', flex: 1, minHeight: 0 }}>
      <div class="view-content" style={{ flex: 1, overflow: 'hidden', display: 'flex', minHeight: 0 }}>
        {mode === 'terminal' && (
          <div style={{ width: '100%', height: '100%' }}>
            <AgentTerminal sessionId={sessionId} isActive={isActive} onExit={onExit} />
          </div>
        )}
        {mode === 'structured' && (
          <div style={{ width: '100%', height: '100%' }}>
            <StructuredView sessionId={sessionId} isActive={isActive} permissionProfile={permissionProfile} />
          </div>
        )}
        {mode === 'split' && (
          <>
            <div style={{ width: '55%', height: '100%', borderRight: '1px solid #334155', overflow: 'hidden' }}>
              <StructuredView sessionId={sessionId} isActive={isActive} permissionProfile={permissionProfile} />
            </div>
            <div style={{ width: '45%', height: '100%', overflow: 'hidden' }}>
              <AgentTerminal sessionId={sessionId} isActive={isActive} onExit={onExit} />
            </div>
          </>
        )}
      </div>
    </div>
  );
}
